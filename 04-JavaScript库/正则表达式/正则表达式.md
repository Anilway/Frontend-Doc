# 正则表达式

- 只能操作字符串
- 由普通字符和特殊字符构成
- 要有逆向思维
- 多个正则组合使用，并非啥都用一个正则搞定
- 功能
  - 查找
  - 替换
  - 验证

## 1、创建正则表达式

区别：

1. 字面量更简洁，但是规则写死了
2. 构造函数更灵活，规则可随时修改

### 1.1 字面量

```js
var b = /.../;
```

### 1.2 构造函数

```js
var b = new RegExp("...", "修饰符");
```

## 2、修饰符

- 3 种修饰符，可组合使用
  - 后面加 i：忽略大小写，`/.../i`或`RegExp("...", "i")`
  - 后面加 g：全局匹配，`/.../g`或`RegExp("...", "g")`
  - 后面加 m：多行匹配，`/.../m`或`RegExp("...", "m")`

## 3、特殊字符

> 特殊字符需要用转义字符：`\`，包括`\`本身

- 制表符：`\t`
- 换行符：`\n`
- unicode 编码匹配中文：`[\u4e00-\u9fa5]`
- 匹配任意字符：`[...]`
- 取反：`[^...]`
- 范围：`[a-zA-Z0-9]`
- 匹配小数点：`/\./`
- 别名
  - `[a-zA-Z0-9_]`的别名是`/\w/`，取反是`/\W/`
  - `/\s/`匹配空格和制表符
  - `/\d/`等于`[0-9]`
- 贪婪重复（默认）
  - `{n,m}`，匹配 n 或 m 次
  - `{n,}`，匹配至少 n 个
  - `{0,1}`或`?`，匹配 0 或 1 次
  - `+`，至少 1 次；`*`，至少 0 次
- 非贪婪重复：加上`?`
- 选择：`/|/`，类似于或门
- 分组：`/()/`，非捕获分组`/(?:)/`
- 指定位置：`/^...$/`，开头是`^`，结尾是`$`
- 单词边界：`/\b/`
- 前瞻性匹配：`/A(?=B)/`A 后面是 B 才匹配
- 前瞻性匹配：`/A(?!B)/`A 后面不是 B 才匹配

## 4、RegExp 对象

### 4.1 方法

- 正则.test(待匹配内容)：返回布尔值
- 正则.exec(待匹配内容)：返回数组或 null

  ```js
  var a = "I love js";
  var b = new RegExp("js");

  console.log(b.test(a)); // true，返回布尔值
  console.log(b.exec(a)); // ["js"]，返回数组或null
  ```

- toString()：转为字符串
- toLocaleString()：转为本地特色字符串
- valueOf()：返回正则本身

### 4.2 属性

- ignoreCase：是否有 i，返回布尔值
- global：是否有 g，返回布尔值
- multiline：是否有 m，返回布尔值

## 5、String 对象中与正则有关的方法

- str.search(正则)：位置搜寻，返回索引值或-1
- str.match(正则)：返回数组或 null
- str.split(分隔符)
- str.replace(正则,"新值")：替换（**很常用**）

## 6、常用正则表达式

- QQ：全数字，首位不为 0，最少 5 位

  - `/^[1-9]\d{4,}$/`

- 昵称：2-18 位，中英文，数字，下划线

  - `/^[\u4e00-\u9fa5a-zA-Z0-9_]{2,18}$/`
  - `/^[\u4e00-\u9fa5\w]{2,18}$/`

- 密码：6-16 位，区分大小写，不能有空白字符\s

  - `/^\S{6,16}$/`

- 去除字符串首尾的空白字符

  - `/^\s*|\s+$/g`

- 转驼峰

  - css：`background-color: red;`
  - js：`elem.style.backgroundColor = red;`
  - jq：`$(elem).css('background-color', 'red');`
  - `/-([a-z])/ig`

- 邮箱

- url
