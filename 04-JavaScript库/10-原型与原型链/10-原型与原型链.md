# 原型与原型链

- 原型：利用 prototype 添加属性和方法
- 原型链：所有的引用类型（数组、对象、函数），`__proto__`属性指向它的构造函数的原型对象 prototype

## 1、原型 5 大要点（重要）

- **所有的引用类型（数组、对象、函数），都具有对象特性，即可自由扩展属性（除了`null`以外）**
- **所有的引用类型（数组、对象、函数），都有一个(隐式属性)`__proto__`属性，属性值是一个普通的对象**
- **所有的函数，都有一个(原型对象)`prototype`**
- **所有的引用类型（数组、对象、函数），`__proto__`属性指向它的构造函数的`prototype`**
- **（很重要）当试图得到一个对象的某个属性时，如果这个对象本身没有这个属性，那么会去它的`__proto__`(即它的构造函数的 prorotype)中寻找**

## 2、原型链-继承

> 核心：将父类的实例作为子类的原型

- 桥梁：`__proto__` → `prorotype`
- 若同名，子类覆盖父类

```js
var arr = [1, 2, 3];
// 原型链是：arr ----> Array.prototype ----> Object.prototype ----> null
// 继承性：Array.prototype定义了indexOf()、shift()等方法，因此你可以在所有的Array对象上直接调用这些方法

function foo() {
  return 0;
}
// 原型链是：foo ----> Function.prototype ----> Object.prototype ----> null
// 继承性：由于Function.prototype定义了apply()等方法，因此，所有函数都可以调用apply()方法
```

## 3、构造函数-继承

> 核心：使用父类的构造函数来增强子类实例，等于是复制父类的实例属性给子类（没用到原型）

例子：动物 》哺乳动物 》人类 》某个人

```js
// 通过call()或apply()实现继承

function Animal(color, weight) {
  this.color = color;
  this.weight = weight;
}
Animal.prototype.eat = function() {
  console.log("chi chi chi");
};

function Mammal(color, weight) {
  Animal.call(this, color, weight); // 继承个性。以构造函数方式调用，this指向创建的那个对象
}
Mammal.prototype = Object.create(Animal.prototype); // 继承共性
Mammal.prototype.constructor = Mammal; // 重设一下构造器
Mammal.prototype.suckle = function() {
  console.log("挤奶");
};

function Person(color, weight) {
  Mammal.call(this, color, weight); // 继承个性。以构造函数方式调用，this指向创建的那个对象
}
Person.prototype = Object.create(Mammal.prototype); // 继承共性
Person.prototype.constructor = Person; // 重设一下构造器
Person.prototype.lie = function() {
  console.log("我很帅");
};

var lsd = new Person("黑色", 65); // 李栓蛋
console.log(lsd);
lsd.eat(); // Animal的能力
lsd.suckle(); // Mammal的能力
lsd.lie(); // Person的能力
var whh = new Person("金色", 100); // 王花花
console.log(whh);
whh.eat();
whh.suckle();
whh.lie();
```

### 要判断一个属性是 xiaoming 自身拥有的，还是继承得到的，可以用 hasOwnProperty()方法

```js
var xiaoming = {
  name: "小明"
};
xiaoming.hasOwnProperty("name"); // true
xiaoming.hasOwnProperty("toString"); // false
```

### 补充

```js
// 构建一个没有任何继承关系的对象，方法如下：
var a = Object.create(null);
console.log(a);
// 还可以自己构建它的原型，方法如下：
var b = Object.create({
  haha: 1,
  hehe: 2
});
console.log(b);
```

## 3、构造函数继承

> 在子类内部构造父类的对象实现继承
